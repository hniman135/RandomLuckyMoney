<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Lì xì đeeeeee</title>
<style>
    body, html {
  height: 100%;
}
    body {
        background-image: url('bg_phone.jpg'); /* Đường dẫn đến hình nền */
        background-size: cover; /* Hiển thị hình nền theo kích thước của cửa sổ trình duyệt */
        background-position: center; /* Căn chỉnh hình nền vào giữa */
        background-repeat: no-repeat; /* Không lặp lại hình nền */
        height: 100%;
    }

    .container {
        text-align: center;
        margin-top: 100px;
    }
    #randomNumber {
        font-size: 24px;
    }
    #generateButton {
        margin-top: 20px;
    }
    .large-number {
        font-size: 36px;
        font-weight: bold;
    }
    .hihi {
        font-size: 18px;
        font-style: italic;
    }
</style>
</head>
<body>

<div class="container">
    <h2>Mẫn sẽ lì xì cho bạn</h2>
    <button onclick="startRandomAnimation()" id="generateButton">Chơi đe bạn eyyy</button>
    <p id="randomNumber"></p>
    <p id="hihiText" class="hihi"></p> <!-- Thêm một phần tử p để hiển thị "hihi" -->
</div>

<script>
var originalMoneyWithWeights = [
    {money: "10,000 đồng", weight: 20},
    {money: "20,000 đồng", weight: 20},
    {money: "30,000 đồng", weight: 20},
    {money: "40,000 đồng", weight: 20},
    {money: "50,000 đồng", weight: 10},
    {money: "60,000 đồng", weight: 5},
    {money: "70,000 đồng", weight: 4},
    {money: "80,000 đồng", weight: 2},
    {money: "90,000 đồng", weight: 1}
];

function startRandomAnimation() {
    var randomNumberDisplay = document.getElementById("randomNumber");
    var hihiText = document.getElementById("hihiText");
    
    var moneyWithWeights = originalMoneyWithWeights.slice(); // Sao chép danh sách ban đầu
    
    var totalWeight = 0;
    moneyWithWeights.forEach(function(item) {
        totalWeight += item.weight;
    });
    
    var intervalId;
    var animationTime = 3000;
    var startTime = new Date().getTime();
    
    intervalId = setInterval(function() {
        var currentTime = new Date().getTime();
        var elapsedTime = currentTime - startTime;
        if (elapsedTime >= animationTime) {
            clearInterval(intervalId);
            var randomMoney = weightedRandom(moneyWithWeights, totalWeight);
            randomNumberDisplay.innerHTML = "Số tiền làaaaa: <span class='large-number'>" + randomMoney + "</span>";
            var hihi = mapToHihi(randomMoney);
            hihiText.innerText = hihi; // Hiển thị hihi tương ứng
        } else {
            var randomMoney = weightedRandom(moneyWithWeights, totalWeight);
            randomNumberDisplay.innerHTML = "Số tiền làaaaa: <span class='large-number'>" + randomMoney + "</span>";
            var hihi = mapToHihi(randomMoney);
            hihiText.innerText = ""; // Ẩn hihi trong quá trình chạy hiệu ứng
        }
    }, 100);
}

function weightedRandom(items, totalWeight) {
    var rand = Math.random() * totalWeight;
    for (var i = 0; i < items.length; i++) {
        if (rand < items[i].weight) {
            var selectedMoney = items[i].money;
            // Reset lại tỷ lệ
            items.forEach(function(item) {
                item.weight = originalMoneyWithWeights.find(x => x.money === item.money).weight;
            });
            return selectedMoney;
        }
        rand -= items[i].weight;
    }
}

function mapToHihi(money) {
    switch (money) {
        case "10,000 đồng":
        case "20,000 đồng":
            return "Đen thôi, Đỏ là RED";
        case "30,000 đồng":
        case "40,000 đồng":
        case "50,000 đồng":
            return "Zữ zậy shaooo";
        case "60,000 đồng":
        case "70,000 đồng":
        case "80,000 đồng":
            return "Khó vậy cũng làm đượccc";
        case "90,000 đồng":
            return "Cho Mẫn cái bình oxi";
        default:
            return "";
    }
}
</script>

</body>
</html>
