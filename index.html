<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Lì xì đeeeeee</title>
<style>
    body, html {
  height: 100%;
}
    body {
        background-image: url('bg_phone.jpg'); /* Đường dẫn đến hình nền */
        background-size: cover; /* Hiển thị hình nền theo kích thước của cửa sổ trình duyệt */
        background-position: center; /* Căn chỉnh hình nền vào giữa */
        background-repeat: no-repeat; /* Không lặp lại hình nền */
        height: 100%;
    }

    .container {
        text-align: center;
        margin-top: 100px;
    }
    #randomNumber {
        font-size: 24px;
    }
    #generateButton {
        margin-top: 20px;
    }
    .large-number {
        font-size: 36px;
        font-weight: bold;
    }
    .hihi {
        font-size: 18px;
        font-style: italic;
    }
</style>
</head>
<body>

<div class="container">
    <h2>Mẫn sẽ lì xì cho bạn</h2>
    <button onclick="startRandomAnimation()" id="generateButton">Chơi đe bạn eyyy</button>
    <p id="randomNumber"></p>
    <p id="hihiText" class="hihi"></p> <!-- Thêm một phần tử p để hiển thị "hihi" -->
    <img id="gifImage" src="https://media.giphy.com/media/GeimqsH0TLDt4tScGw/giphy.gif" alt="GIF">
</div>

<script>
var originalMoneyWithWeights = [
    {money: "10,000 đồng", weight: 40},
    {money: "20,000 đồng", weight: 40},
    {money: "30,000 đồng", weight: 10},
    {money: "40,000 đồng", weight: 5},
    {money: "50,000 đồng", weight: 1},
    {money: "60,000 đồng", weight: 1},
    {money: "70,000 đồng", weight: 1},
    {money: "80,000 đồng", weight: 1},
    {money: "90,000 đồng", weight: 1}
];
var tempMoneyWithWeights = [
    {money: "10,000 đồng", weight: 20},
    {money: "20,000 đồng", weight: 15},
    {money: "30,000 đồng", weight: 10},
    {money: "40,000 đồng", weight: 10},
    {money: "50,000 đồng", weight: 15},
    {money: "60,000 đồng", weight: 20},
    {money: "70,000 đồng", weight: 20},
    {money: "80,000 đồng", weight: 25},
    {money: "90,000 đồng", weight: 30},
    {money: "100,000 đồng", weight: 30}
];


function startRandomAnimation() {
    var randomNumberDisplay = document.getElementById("randomNumber");
    var hihiText = document.getElementById("hihiText");
    
    
    // Sử dụng mảng tempMoneyWithWeights cho hiệu ứng
    var moneyWithWeights = tempMoneyWithWeights.slice();
    
    var totalWeight = moneyWithWeights.reduce((total, item) => total + item.weight, 0);
    
    var intervalId;
    var animationTime = 3000;
    var startTime = new Date().getTime();
    
    intervalId = setInterval(function() {
        var currentTime = new Date().getTime();
        var elapsedTime = currentTime - startTime;
        if (elapsedTime >= animationTime) {
            clearInterval(intervalId);
            // Khi hiển thị kết quả cuối cùng, sử dụng originalMoneyWithWeights
            var randomMoney = weightedRandom(originalMoneyWithWeights, originalMoneyWithWeights.reduce((total, item) => total + item.weight, 0));
            randomNumberDisplay.innerHTML = "Số tiền làaaaa: <span class='large-number'>" + randomMoney + "</span>";
            var hihi = mapToHihi(randomMoney);
            hihiText.innerText = hihi;
        } else {
            var randomMoney = weightedRandom(moneyWithWeights, totalWeight);
            randomNumberDisplay.innerHTML = "Số tiền làaaaa: <span class='large-number'>" + randomMoney + "</span>";
            hihiText.innerText = ""; // Ẩn hihi trong quá trình chạy hiệu ứng
        }
    }, 100);
}

function weightedRandom(items, totalWeight) {
    var rand = Math.random() * totalWeight;
    for (var i = 0; i < items.length; i++) {
        if (rand < items[i].weight) {
            var selectedMoney = items[i].money;
            return selectedMoney;
        }
        rand -= items[i].weight;
    }
}

function mapToHihi(money) {
    switch (money) {
        case "10,000 đồng":
        case "20,000 đồng":
            var gifImage = document.getElementById("gifImage");
            gifImage.src = "https://media.giphy.com/media/vBTxCPUwfC6ddBsTbs/giphy.gif";
            return "Đen thôi, Đỏ là RED";
        case "30,000 đồng":
        case "40,000 đồng":
        case "50,000 đồng":
            var gifImage = document.getElementById("gifImage");
            gifImage.src = "https://media.giphy.com/media/P4GxohAK1vaKI2yH8E/giphy.gif";
            return "Zữ zậy shaooo";
        case "60,000 đồng":
        case "70,000 đồng":
        case "80,000 đồng":
            var gifImage = document.getElementById("gifImage");
            gifImage.src = "https://media.giphy.com/media/3S13KRy5AzPScqliki/giphy.gif";
            return "Khó vậy cũng làm đượccc";
        case "90,000 đồng":
            var gifImage = document.getElementById("gifImage");
            gifImage.src = "https://media.giphy.com/media/boLwZ1VvxuijmfbIYD/giphy.gif";
            return "Cho Mẫn cái bình oxi";
        default:
            return "";
    }
}
</script>

</body>
</html>
